<nz-table #basicTable [nzData]="actions" class="hidden-thead">
  <thead>
    <tr>
      <th>Name</th>
      <th></th>
      <th>Action</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let action of basicTable.data">
      <td>
        <nz-select [(ngModel)]="action.type" (ngModelChange)="onActionTypeChanged(action)" nzPlaceHolder="Choose">
          <nz-option *ngFor="let validType of validActionTypes" [nzValue]="validType" [nzLabel]="validType"></nz-option>
        </nz-select>
      </td>
      <td>
        <div *ngIf="action.type === 'noop'">
          No-op
        </div>

        <div *ngIf="action.type === 'e-mail'">
                <form nz-form>
                  <nz-form-item>
                    <nz-form-control nzErrorTip="Please input your username!">
                      <nz-input-group nzPrefixIcon="user">
                        <input
                          type="email"
                          nz-input
                          [(ngModel)]="action.data.toEmail"
                          [ngModelOptions]="{ standalone: true }"
                        />
                      </nz-input-group>
                    </nz-form-control>
      
                    <nz-form-control nzErrorTip="Please input your username!">
                      <nz-input-group nzPrefixIcon="user">
                        <input
                          type="text"
                          nz-input
                          [(ngModel)]="action.data.subject"
                          [ngModelOptions]="{ standalone: true }"
                        />
                      </nz-input-group>
                    </nz-form-control>
      
                    <nz-form-control nzErrorTip="Please input your username!">
                      <nz-input-group nzPrefixIcon="user">
                        <textarea
                          type="text"
                          nz-input
                          [(ngModel)]="action.data.text"
                          [ngModelOptions]="{ standalone: true }"
                        ></textarea>
                      </nz-input-group>
                    </nz-form-control>
                  </nz-form-item>
                </form>
              </div>

              <div *ngIf="action.type === 'wire-transfer'">
                    <form nz-form>
                      <nz-form-item>
                        <nz-form-control nzErrorTip="Please input your username!">
                          <nz-input-group nzPrefixIcon="user">
                            <input
                              type="text"
                              nz-input
                              [(ngModel)]="action.data.counterPartyName"
                              [ngModelOptions]="{ standalone: true }"
                            />
                          </nz-input-group>
                        </nz-form-control>
          
                        <nz-form-control nzErrorTip="Please input your username!">
                                <nz-input-group nzPrefixIcon="user">
                                  <input
                                    type="text"
                                    nz-input
                                    [(ngModel)]="action.data.iban"
                                    [ngModelOptions]="{ standalone: true }"
                                  />
                                </nz-input-group>
                              </nz-form-control>

                              <nz-form-control nzErrorTip="Please input your username!">
                                    <nz-input-group nzPrefixIcon="user">
                                      <input
                                        type="text"
                                        nz-input
                                        [(ngModel)]="action.data.paymentReference"
                                        [ngModelOptions]="{ standalone: true }"
                                      />
                                    </nz-input-group>
                                  </nz-form-control>

                              <nz-form-control nzErrorTip="Please input your username!">
                                    <nz-input-group nzPrefixIcon="user">
                                      <input
                                        type="number"
                                        nz-input
                                        [(ngModel)]="action.data.amount"
                                        [ngModelOptions]="{ standalone: true }"
                                      />
                                      <span *ngIf="!action.data.usePercentage">EUR</span>
                                      <span *ngIf="action.data.usePercentage">%</span>
                                    </nz-input-group>
                                  </nz-form-control>
                                  <nz-form-control nzErrorTip="Please input your username!">
                                        <nz-switch 
                                        [(ngModel)]="action.data.usePercentage"
                                        [ngModelOptions]="{ standalone: true }"></nz-switch>
                                      </nz-form-control>
                            </nz-form-item>
                    </form>
                  </div>


        <div>
          {{ action | json }}
        </div>
      </td>
      <td>
        <button nz-button type="submit" nzType="primary" nzSize="large" (click)="removeAction(action)">
          -
        </button>
      </td>
    </tr>
  </tbody>
</nz-table>
<button nz-button type="submit" nzType="primary" nzSize="large" (click)="addAction()">
  Add Action
</button>
